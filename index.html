<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Agus Hambali — Crypto Airdrop Explorer</title>
  <meta name="description" content="Discover crypto airdrops with real-time prices, charts, and news, optimized for mobile." />
  <meta property="og:title" content="Agus Hambali Crypto Dashboard" />
  <meta property="og:description" content="Immersive crypto airdrop finder with live insights, designed for mobile and desktop." />
  <meta property="og:image" content="https://i.postimg.cc/wMq4pR9z/Picsart-25-08-23-04-57-59-050.png" />
  <meta property="og:url" content="https://crypto-dashboard.vercel.app" />
  <base href="/" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script src="https://s3.tradingview.com/tv.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.4.0/purify.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Poppins:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #10b981;
      --secondary: #3b82f6;
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --bg-primary: #020617;
      --bg-secondary: #0f172a;
      --bg-gradient: linear-gradient(to bottom right, #071025, #0b1b2b, #122033);
      --glass-bg: rgba(30, 41, 59, 0.55);
      --glass-border: rgba(148, 163, 184, 0.08);
      --shadow: 0 8px 24px -10px rgba(0, 0, 0, 0.45);
      --animation-duration: 0.3s;
      --font-size-base: 16px;
      --font-size-sm: 14px;
    }

    .light {
      --primary: #059669;
      --secondary: #2563eb;
      --text-primary: #0f172a;
      --text-secondary: #475569;
      --bg-primary: #f8fafc;
      --bg-secondary: #e2e8f0;
      --bg-gradient: linear-gradient(to bottom right, #f0f9ff, #e0f2fe, #dbeafe);
      --glass-bg: rgba(255, 255, 255, 0.55);
      --shadow: 0 8px 24px -10px rgba(0, 0, 0, 0.1);
    }

    .theme-neon {
      --primary: #22d3ee;
      --secondary: #a855f7;
      --bg-gradient: linear-gradient(to bottom right, #0d1b2a, #1b263b, #415a77);
    }

    .theme-cosmic {
      --primary: #f472b6;
      --secondary: #a78bfa;
      --bg-gradient: linear-gradient(to bottom right, #1e1b4b, #312e81, #5b21b6);
    }

    body {
      background: var(--bg-gradient);
      color: var(--text-primary);
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      font-size: var(--font-size-base);
      transition: all 0.5s ease;
      margin: 0;
    }

    .glass {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      border-radius: 1rem;
      box-shadow: var(--shadow);
      transition: transform var(--animation-duration), box-shadow var(--animation-duration);
    }

    .glass:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px -12px rgba(0, 0, 0, 0.5);
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 600;
      font-size: var(--font-size-sm);
      transition: transform var(--animation-duration), background-color var(--animation-duration);
      touch-action: manipulation;
    }

    .btn:hover {
      transform: scale(1.05);
    }

    .category-title {
      background: linear-gradient(to right, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      color: transparent;
      font-family: 'Poppins', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    table th, table td {
      padding: 10px;
      text-align: left;
      border: 1px solid rgba(255, 255, 255, 0.1);
      font-size: var(--font-size-sm);
    }

    table tr:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .airdrop-card {
      display: none;
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 0.75rem;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      cursor: pointer;
    }

    .airdrop-card:hover {
      transform: translateY(-2px);
    }

    @media (max-width: 640px) {
      table {
        display: none;
      }
      .airdrop-card {
        display: block;
      }
      :root {
        --font-size-base: 14px;
        --font-size-sm: 12px;
      }
      .container {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
      .hero-title {
        font-size: 2rem;
      }
      .btn {
        padding: 0.5rem 1rem;
      }
      .modal > div {
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
      }
    }

    .skeleton {
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s infinite;
    }

    @keyframes skeleton-loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    [data-aos] {
      animation: fadeIn 0.5s ease-out;
    }

    .modal {
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .modal-overlay {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
    }

    .hero-title span {
      display: inline-block;
      animation: kinetic 2s ease-in-out infinite alternate;
    }

    @keyframes kinetic {
      0% { transform: translateY(0); }
      100% { transform: translateY(-3px); }
    }

    .price-card {
      perspective: 800px;
      transition: transform 0.4s;
    }

    .price-card:hover {
      transform: rotateY(4deg) rotateX(4deg);
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 3px;
    }

    .bottom-nav a {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.25rem;
      font-size: var(--font-size-sm);
      padding: 0.75rem;
    }

    .bottom-nav a:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: scale(1.1);
    }
  </style>
</head>
<body class="min-h-screen transition-all duration-500">
  <script>
    (function () {
      const theme = localStorage.getItem('theme') || 'dark';
      document.documentElement.classList.toggle('light', theme === 'light');
      document.documentElement.classList.toggle('theme-neon', theme === 'neon');
      document.documentElement.classList.toggle('theme-cosmic', theme === 'cosmic');
    })();

    AOS.init({ once: true, duration: 500, disable: 'mobile' });

    const COINGECKO_SIMPLE = 'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana&vs_currencies=usd&include_24hr_change=true';
    const COINGECKO_STATUS = 'https://api.coingecko.com/api/v3/status_updates?per_page=9&page=1';
    const $ = id => document.getElementById(id);

    function logError(message, error) {
      console.error(`[Error] ${message}`, error);
      const errorDiv = document.createElement('div');
      errorDiv.className = 'text-red-400 text-center p-4 glass fixed top-4 left-4 right-4 z-50';
      errorDiv.innerText = `Error: ${message}`;
      document.body.appendChild(errorDiv);
      setTimeout(() => errorDiv.remove(), 3000);
    }

    function setTheme(theme) {
      document.documentElement.classList = `scroll-smooth ${theme}`;
      localStorage.setItem('theme', theme);
      $('themeSelect')?.value = theme;
      loadTV($('chartSymbol')?.value, $('chartTimeframe')?.value);
    }

    $('themeSelect')?.addEventListener('change', (e) => setTheme(e.target.value));

    async function fetchWithRetry(url, retries = 3, delay = 1000) {
      for (let i = 0; i < retries; i++) {
        try {
          const res = await fetch(url);
          if (res.status === 429) {
            await new Promise(resolve => setTimeout(resolve, delay * (i + 1)));
            continue;
          }
          if (!res.ok) throw new Error(`HTTP error: ${res.status}`);
          return await res.json();
        } catch (err) {
          if (i === retries - 1) throw err;
        }
      }
    }

    async function loadPrices() {
      try {
        const cacheKey = 'coingecko_prices';
        const cacheTime = localStorage.getItem('prices_timestamp');
        const cache = localStorage.getItem(cacheKey);
        const now = Date.now();
        if (cache && cacheTime && now - cacheTime < 5 * 60 * 1000) {
          try {
            const j = JSON.parse(cache);
            if (j.bitcoin && j.ethereum && j.solana) {
              updatePriceUI(j);
              return;
            }
          } catch {}
        }
        const j = await fetchWithRetry(COINGECKO_SIMPLE);
        localStorage.setItem(cacheKey, JSON.stringify(j));
        localStorage.setItem('prices_timestamp', now);
        updatePriceUI(j);
      } catch (err) {
        logError('Failed to load prices', err);
        $('btcPrice').innerText = 'Error';
        $('ethPrice').innerText = 'Error';
        $('solPrice').innerText = 'Error';
      }
    }

    function updatePriceUI(j) {
      const btc = j.bitcoin, eth = j.ethereum, sol = j.solana;
      $('btcPrice').innerText = btc ? '$' + Number(btc.usd).toLocaleString() : '—';
      $('btcChange').innerText = btc ? (btc.usd_24h_change >= 0 ? '+' : '') + btc.usd_24h_change.toFixed(2) + '% (24h)' : '—';
      $('btcChange').className = btc && btc.usd_24h_change >= 0 ? 'text-green-200 text-sm mt-2' : 'text-red-200 text-sm mt-2';

      $('ethPrice').innerText = eth ? '$' + Number(eth.usd).toLocaleString() : '—';
      $('ethChange').innerText = eth ? (eth.usd_24h_change >= 0 ? '+' : '') + eth.usd_24h_change.toFixed(2) + '% (24h)' : '—';
      $('ethChange').className = eth && eth.usd_24h_change >= 0 ? 'text-green-200 text-sm mt-2' : 'text-red-200 text-sm mt-2';

      $('solPrice').innerText = sol ? '$' + Number(sol.usd).toLocaleString() : '—';
      $('solChange').innerText = sol ? (sol.usd_24h_change >= 0 ? '+' : '') + sol.usd_24h_change.toFixed(2) + '% (24h)' : '—';
      $('solChange').className = sol && sol.usd_24h_change >= 0 ? 'text-green-200 text-sm mt-2' : 'text-red-200 text-sm mt-2';
    }

    let currentSymbol = 'BINANCE:BTCUSDT';
    function loadTV(symbol = 'BINANCE:BTCUSDT', timeframe = '60') {
      try {
        currentSymbol = symbol;
        const container = $('tvContainer');
        container.innerHTML = '';
        new TradingView.widget({
          container_id: 'tvContainer',
          width: '100%',
          height: window.innerWidth <= 640 ? 400 : 450,
          symbol: symbol,
          interval: timeframe,
          timezone: 'Asia/Jakarta',
          theme: localStorage.getItem('theme') === 'light' ? 'Light' : 'Dark',
          style: '1',
          locale: 'en',
          toolbar_bg: 'rgba(0,0,0,0)',
          enable_publishing: false,
          allow_symbol_change: true,
          studies: ['RSI@tv-basicstudies', 'MAExp@tv-basicstudies'],
        });
      } catch (err) {
        logError('Failed to load TradingView widget', err);
      }
    }

    $('reloadTV')?.addEventListener('click', () => loadTV($('chartSymbol').value, $('chartTimeframe').value));
    $('chartSymbol')?.addEventListener('change', (e) => loadTV(e.target.value, $('chartTimeframe').value));
    $('chartTimeframe')?.addEventListener('change', (e) => loadTV($('chartSymbol').value, e.target.value));

    async function loadNews() {
      const list = $('newsList');
      list.innerHTML = `
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div class="p-4 rounded-xl glass skeleton h-28"></div>
          <div class="p-4 rounded-xl glass skeleton h-28"></div>
          <div class="p-4 rounded-xl glass skeleton h-28"></div>
          <div class="p-4 rounded-xl glass skeleton h-28"></div>
        </div>
      `;

      try {
        const response = await fetchWithRetry(COINGECKO_STATUS);
        const updates = response.status_updates || [];
        list.innerHTML = updates.length === 0 ? '<div class="text-sm text-[var(--text-secondary)] text-center p-4">No news updates available.</div>' : '';

        updates.forEach(update => {
          const time = new Date(update.created_at).toLocaleString('en-US', { timeZone: 'Asia/Jakarta' });
          const title = update.project ? `${update.project.name} — ${update.category || 'Update'}` : 'General Update';
          const url = update.project ? `https://www.coingecko.com/en/coins/${update.project.slug}` : '#';
          const description = (update.description || 'No description available').replace(/<\/?[^>]+(>|$)/g, '').slice(0, 120);

          const card = document.createElement('a');
          card.href = url;
          card.target = '_blank';
          card.className = 'block p-4 rounded-xl glass border border-[var(--glass-border)]';
          card.innerHTML = `
            <div class="text-xs text-[var(--text-secondary)]">${time} WIB</div>
            <h3 class="font-semibold mt-1 text-[var(--primary)]">${title}</h3>
            <p class="text-sm mt-2 line-clamp-2 text-[var(--text-secondary)]">${description}${description.length === 120 ? '...' : ''}</p>
          `;
          list.appendChild(card);
        });
      } catch (error) {
        list.innerHTML = '<div class="text-sm text-red-300 text-center p-4">Failed to load news.</div>';
      }
    }

    const AIR_KEY = 'airdrops_v3';
    const DEFAULT_AIR = [
      { name: 'ZKSync Era', type: 'Testnet', url: 'https://zksync.io', social: 'https://twitter.com/zksync', status: 'Open', deadline: '2025-12-31' },
      { name: 'LayerZero Points', type: 'Quest', url: 'https://layerzero.network', social: 'https://t.me/layerzero', status: 'Open', deadline: '2025-11-15' },
      { name: 'Starknet Airdrop', type: 'Testnet', url: 'https://starknet.io', social: 'https://discord.gg/starknet', status: 'Pending', deadline: '2025-10-30' },
      { name: 'Celestia Rewards', type: 'Other', url: 'https://celestia.org', social: 'https://twitter.com/celestiaorg', status: 'Closed', deadline: '2025-08-01' },
      { name: 'Arbitrum Quest', type: 'Quest', url: 'https://arbitrum.io', social: 'https://t.me/arbitrum', status: 'Open', deadline: '2025-12-01' },
    ];

    function getAirdrops() {
      const raw = localStorage.getItem(AIR_KEY);
      if (!raw) {
        localStorage.setItem(AIR_KEY, JSON.stringify(DEFAULT_AIR));
        return DEFAULT_AIR;
      }
      try {
        return JSON.parse(raw);
      } catch {
        return DEFAULT_AIR;
      }
    }

    function setAirdrops(a) {
      localStorage.setItem(AIR_KEY, JSON.stringify(a));
    }

    function isValidURL(str) {
      try {
        new URL(str);
        return true;
      } catch {
        return false;
      }
    }

    function isValidDate(str) {
      return str === '-' || /^\d{4}-\d{2}-\d{2}$/.test(str);
    }

    function renderAirdrops(airdrops = getAirdrops()) {
      const tb = $('airdropTable');
      tb.innerHTML = '<div id="airdropContainer"></div>';
      const container = $('airdropContainer');
      const categories = [
        { name: 'Testnet', title: 'Testnet Airdrops' },
        { name: 'Quest', title: 'Quest Airdrops' },
        { name: 'Other', title: 'Other Airdrops' },
      ];

      categories.forEach(category => {
        const filtered = airdrops.filter(a => a.type === category.name || (category.name === 'Other' && !['Testnet', 'Quest'].includes(a.type)));
        if (filtered.length > 0) {
          const header = document.createElement('div');
          header.className = 'mb-4';
          header.innerHTML = `<h3 class="category-title">${category.title}</h3><hr class="border-[var(--glass-border)]">`;
          container.appendChild(header);

          filtered.forEach((a, i) => {
            const card = document.createElement('div');
            card.className = 'airdrop-card';
            card.dataset.index = i;
            card.innerHTML = `
              <div class="flex justify-between items-center">
                <div>
                  <h4 class="font-medium">${a.name}</h4>
                  <p class="text-xs text-[var(--text-secondary)]">${a.type} • ${a.status}</p>
                </div>
                <div class="flex gap-2">
                  <button data-i="${i}" class="editAir btn bg-[var(--glass-bg)] text-[var(--text-primary)] text-xs mr-2">Edit</button>
                  <button data-i="${i}" class="delAir btn bg-red-600/70 text-white text-xs">Delete</button>
                </div>
              </div>`;
            card.addEventListener('click', (e) => {
              if (e.target.tagName !== 'BUTTON' && window.innerWidth <= 640) {
                $('airdropDetailContent').innerHTML = `
                  <p><strong>Name:</strong> ${a.name}</p>
                  <p><strong>Type:</strong> ${a.type}</p>
                  <p><strong>Link:</strong> <a href="${a.url}" target="_blank" class="text-[var(--primary)] underline">${a.url}</a></p>
                  <p><strong>Social:</strong> <a href="${a.social}" target="_blank" class="text-[var(--primary)] underline">${a.social}</a></p>
                  <p><strong>Status:</strong> ${a.status}</p>
                  <p><strong>Deadline:</strong> ${a.deadline || '-'}</p>`;
                $('airdropDetailModal').classList.remove('hidden');
              }
            });
            container.appendChild(card);
          });
        }
      });

      document.querySelectorAll('.delAir').forEach(btn => btn.addEventListener('click', e => {
        const i = +e.currentTarget.dataset.i;
        const a = getAirdrops();
        a.splice(i, 1);
        setAirdrops(a);
        renderAirdrops();
      }));

      document.querySelectorAll('.editAir').forEach(btn => btn.addEventListener('click', e => {
        const i = +e.currentTarget.dataset.i;
        const airdrops = getAirdrops();
        const cur = airdrops[i];
        const form = $('airdropForm');
        form.name.value = cur.name;
        form.type.value = cur.type;
        form.url.value = cur.url;
        form.social.value = cur.social;
        form.status.value = cur.status;
        form.deadline.value = cur.deadline === '-' ? '' : cur.deadline;
        form.dataset.index = i;
        $('airdropModal').classList.remove('hidden');
      }));

      new Sortable($('airdropContainer'), {
        animation: 150,
        ghostClass: 'bg-[var(--glass-bg)]',
        onEnd: (evt) => {
          const airdrops = getAirdrops();
          const [moved] = airdrops.splice(evt.oldIndex, 1);
          airdrops.splice(evt.newIndex, 0, moved);
          setAirdrops(airdrops);
          renderAirdrops();
        },
      });
    }

    $('addAirdrop')?.addEventListener('click', () => {
      $('airdropForm').reset();
      delete $('airdropForm').dataset.index;
      $('airdropModal').classList.remove('hidden');
    });

    $('closeModal')?.addEventListener('click', () => {
      $('airdropModal').classList.add('hidden');
    });

    $('closeDetailModal')?.addEventListener('click', () => {
      $('airdropDetailModal').classList.add('hidden');
    });

    $('airdropForm')?.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const url = formData.get('url');
      const social = formData.get('social');
      const deadline = formData.get('deadline') || '-';
      if (!isValidURL(url) || (social && !isValidURL(social))) {
        logError('Invalid URL format');
        return;
      }
      if (deadline !== '-' && !isValidDate(deadline)) {
        logError('Invalid date format');
        return;
      }
      const newAirdrop = {
        name: DOMPurify.sanitize(formData.get('name')),
        type: DOMPurify.sanitize(formData.get('type')),
        url: DOMPurify.sanitize(url),
        social: DOMPurify.sanitize(social),
        status: DOMPurify.sanitize(formData.get('status')),
        deadline: DOMPurify.sanitize(deadline),
      };
      const airdrops = getAirdrops();
      const index = e.target.dataset.index;
      if (index !== undefined) {
        airdrops[+index] = newAirdrop;
      } else {
        airdrops.unshift(newAirdrop);
      }
      setAirdrops(airdrops);
      renderAirdrops();
      $('airdropModal').classList.add('hidden');
      e.target.reset();
    });

    $('searchAirdrop')?.addEventListener('input', filterAirdrops);
    $('filterStatus')?.addEventListener('change', filterAirdrops);

    function filterAirdrops() {
      const search = $('searchAirdrop').value.toLowerCase();
      const status = $('filterStatus').value;
      const airdrops = getAirdrops().filter(a =>
        a.name.toLowerCase().includes(search) &&
        (status === '' || a.status === status)
      );
      renderAirdrops(airdrops);
    }

    $('exportAirdrops')?.addEventListener('click', () => {
      try {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const airdrops = getAirdrops();
        const categories = [
          { name: 'Testnet', title: 'Testnet Airdrops' },
          { name: 'Quest', title: 'Quest Airdrops' },
          { name: 'Other', title: 'Other Airdrops' },
        ];

        doc.setFontSize(16);
        doc.text('Airdrop List by Agus Hambali', 20, 20);
        doc.setFontSize(10);
        doc.text(`Generated on: ${new Date().toLocaleString()}`, 20, 30);
        let y = 40;

        categories.forEach(category => {
          const filtered = airdrops.filter(a => a.type === category.name || (category.name === 'Other' && !['Testnet', 'Quest'].includes(a.type)));
          if (filtered.length > 0) {
            doc.setFontSize(12);
            doc.setTextColor(0, 128, 0);
            doc.text(category.title, 20, y);
            y += 10;
            doc.setLineWidth(0.5);
            doc.line(20, y, 190, y);
            y += 10;
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            filtered.forEach((a, i) => {
              doc.text(`${i + 1}. ${a.name}`, 20, y);
              doc.text(`Type: ${a.type}`, 50, y);
              doc.text(`Status: ${a.status}`, 80, y);
              doc.text(`Deadline: ${a.deadline || '-'}`, 110, y);
              y += 7;
              doc.text(`URL: ${a.url}`, 20, y);
              y += 7;
              doc.text(`Social: ${a.social}`, 20, y);
              y += 10;
              if (y > 270) {
                doc.addPage();
                y = 20;
              }
            });
            y += 10;
          }
        });

        const today = new Date().toISOString().split('T')[0];
        doc.save(`Airdrop_List_${today}.pdf`);
      } catch (err) {
        logError('Failed to export PDF', err);
      }
    });

    function checkAirdropDeadlines() {
      if (!("Notification" in window) || Notification.permission !== 'granted') return;
      const airdrops = getAirdrops();
      const today = new Date().toISOString().split('T')[0];
      airdrops.forEach(a => {
        if (a.deadline && a.deadline !== '-' && a.deadline <= today && a.status !== 'Closed') {
          new Notification(`Airdrop Alert: ${a.name}`, {
            body: `Deadline for ${a.name} is today! Check now: ${a.url}`,
          });
        }
      });
    }

    if (Notification.permission !== 'granted') Notification.requestPermission();
    checkAirdropDeadlines();
    setInterval(checkAirdropDeadlines, 60 * 60 * 1000);

    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const target = document.querySelector(a.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          if (entry.target.id === 'news') loadNews();
          if (entry.target.id === 'chart') loadTV();
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });

    observer.observe($('news'));
    observer.observe($('chart'));

    document.addEventListener('DOMContentLoaded', () => {
      console.info('Crypto Airdrop Explorer loaded!');
      try {
        loadPrices();
        renderAirdrops();
      } catch (err) {
        logError('Initial render failed', err);
      }
    });
  </script>

  <div class="container mx-auto px-4 py-6 max-w-6xl">
    <!-- Header -->
    <header class="flex flex-col sm:flex-row items-center justify-between mb-6 gap-4" data-aos="fade-down">
      <div class="flex items-center gap-3">
        <picture>
          <source srcset="https://i.postimg.cc/wMq4pR9z/Picsart-25-08-23-04-57-59-050.webp" type="image/webp">
          <img src="https://i.postimg.cc/wMq4pR9z/Picsart-25-08-23-04-57-59-050.png" alt="Agus Hambali" loading="lazy" class="w-12 h-12 rounded-full ring-2 ring-[var(--primary)] shadow-md">
        </picture>
        <div>
          <h1 class="text-xl font-bold text-[var(--text-primary)]">Agus Hambali</h1>
          <p class="text-sm text-[var(--text-secondary)]">Airdrop Hunter • Trader • Explorer</p>
        </div>
      </div>
      <nav class="hidden sm:flex items-center gap-3">
        <a href="#airdrops" class="px-3 py-2 rounded-lg hover:bg-[var(--glass-bg)] transition-colors">Airdrops</a>
        <a href="#prices" class="px-3 py-2 rounded-lg hover:bg-[var(--glass-bg)] transition-colors">Prices</a>
        <a href="#chart" class="px-3 py-2 rounded-lg hover:bg-[var(--glass-bg)] transition-colors">Chart</a>
        <a href="#news" class="px-3 py-2 rounded-lg hover:bg-[var(--glass-bg)] transition-colors">News</a>
        <a href="#contact" class="px-3 py-2 rounded-lg hover:bg-[var(--glass-bg)] transition-colors">Contact</a>
        <select id="themeSelect" class="px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm">
          <option value="dark">Dark</option>
          <option value="light">Light</option>
          <option value="neon">Neon</option>
          <option value="cosmic">Cosmic</option>
        </select>
      </nav>
    </header>

    <!-- Hero -->
    <section class="text-center mb-8" data-aos="zoom-in">
      <h1 class="hero-title text-4xl sm:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-[var(--primary)] to-[var(--secondary)]">
        <span>C</span><span>r</span><span>y</span><span>p</span><span>t</span><span>o</span> <span>A</span><span>i</span><span>r</span><span>d</span><span>r</span><span>o</span><span>p</span> <span>E</span><span>x</span><span>p</span><span>l</span><span>o</span><span>r</span><span>e</span><span>r</span>
      </h1>
      <p class="mt-3 text-base text-[var(--text-secondary)] max-w-2xl mx-auto">Track the latest crypto airdrops, prices, and news with a sleek, mobile-friendly dashboard.</p>
      <div class="mt-6 flex flex-wrap justify-center gap-3">
        <a href="https://t.me/agushambali33" target="_blank" class="btn bg-[var(--primary)] text-[var(--bg-primary)]">Telegram</a>
        <a href="https://twitter.com/agushambali33" target="_blank" class="btn bg-[var(--secondary)] text-white">X</a>
        <a href="https://discord.com/users/agushambali33" target="_blank" class="btn bg-[#7c3aed] text-white">Discord</a>
      </div>
    </section>

    <!-- Airdrops -->
    <section id="airdrops" class="glass p-6 sm:p-8 mb-8" data-aos="fade-up">
      <div class="flex flex-col sm:flex-row items-center justify-between mb-4 gap-3">
        <h2 class="category-title">Latest Airdrops</h2>
        <div class="flex gap-2">
          <button id="addAirdrop" class="btn bg-[var(--primary)] text-[var(--bg-primary)]">+ Add</button>
          <button id="exportAirdrops" class="btn bg-[var(--secondary)] text-white">Export</button>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row gap-2 mb-4">
        <input id="searchAirdrop" type="text" placeholder="Search airdrops..." class="flex-1 px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]">
        <select id="filterStatus" class="px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)]">
          <option value="">All Status</option>
          <option value="Open">Open</option>
          <option value="Pending">Pending</option>
          <option value="Closed">Closed</option>
        </select>
      </div>
      <div id="airdropTable" class="sortable"></div>
    </section>

    <!-- Prices -->
    <section id="prices" class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8" data-aos="fade-up">
      <div class="price-card glass p-5 rounded-xl bg-gradient-to-br from-orange-500/80 to-yellow-400/80 text-[var(--bg-primary)]">
        <div class="flex justify-between">
          <div>
            <h3 class="font-bold text-lg">Bitcoin</h3>
            <p class="text-sm opacity-80">BTC</p>
          </div>
          <span class="text-xs opacity-80">Live</span>
        </div>
        <p class="mt-3 text-2xl font-mono" id="btcPrice">—</p>
        <p id="btcChange" class="text-sm mt-2">—</p>
      </div>
      <div class="price-card glass p-5 rounded-xl bg-gradient-to-br from-blue-500/80 to-purple-500/80 text-white">
        <div class="flex justify-between">
          <div>
            <h3 class="font-bold text-lg">Ethereum</h3>
            <p class="text-sm opacity-80">ETH</p>
          </div>
          <span class="text-xs opacity-80">Live</span>
        </div>
        <p class="mt-3 text-2xl font-mono" id="ethPrice">—</p>
        <p id="ethChange" class="text-sm mt-2">—</p>
      </div>
      <div class="price-card glass p-5 rounded-xl bg-gradient-to-br from-purple-500/80 to-pink-500/80 text-white">
        <div class="flex justify-between">
          <div>
            <h3 class="font-bold text-lg">Solana</h3>
            <p class="text-sm opacity-80">SOL</p>
          </div>
          <span class="text-xs opacity-80">Live</span>
        </div>
        <p class="mt-3 text-2xl font-mono" id="solPrice">—</p>
        <p id="solChange" class="text-sm mt-2">—</p>
      </div>
    </section>

    <!-- Chart -->
    <section id="chart" class="glass p-6 sm:p-8 mb-8" data-aos="fade-up">
      <div class="flex flex-col sm:flex-row items-center justify-between mb-4 gap-3">
        <h2 class="category-title">Live Chart</h2>
        <div class="flex items-center gap-2">
          <select id="chartSymbol" class="px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm">
            <option value="BINANCE:BTCUSDT">BTC / USDT</option>
            <option value="BINANCE:ETHUSDT">ETH / USDT</option>
            <option value="BINANCE:SOLUSDT">SOL / USDT</option>
          </select>
          <select id="chartTimeframe" class="px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] text-sm">
            <option value="15">15M</option>
            <option value="60" selected>1H</option>
            <option value="240">4H</option>
            <option value="D">1D</option>
          </select>
          <button id="reloadTV" class="btn bg-[var(--secondary)] text-white">Reload</button>
        </div>
      </div>
      <div id="tvContainer" class="w-full h-[400px] sm:h-[450px] rounded-lg overflow-hidden border border-[var(--glass-border)]"></div>
    </section>

    <!-- News -->
    <section id="news" class="glass p-6 sm:p-8 mb-8" data-aos="fade-up">
      <div class="flex items-center justify-between mb-4">
        <h2 class="category-title">Crypto News</h2>
        <button id="newsRefresh" class="btn bg-[var(--secondary)] text-white">Refresh</button>
      </div>
      <div id="newsList" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></div>
      <p class="text-xs mt-4 opacity-60">Source: CoinGecko status updates</p>
    </section>

    <!-- Contact -->
    <section id="contact" class="glass p-6 sm:p-8 mb-16" data-aos="fade-up">
      <h2 class="category-title mb-4">Get in Touch</h2>
      <form action="https://formsubmit.co/akunpremiumaing@gmail.com" method="POST" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <input type="hidden" name="_captcha" value="false" />
        <input type="hidden" name="_subject" value="Message from Airdrop Explorer" />
        <div>
          <label class="text-sm text-[var(--text-secondary)]">Name</label>
          <input name="name" class="w-full px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]" required />
        </div>
        <div>
          <label class="text-sm text-[var(--text-secondary)]">Email</label>
          <input name="email" type="email" class="w-full px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]" required />
        </div>
        <div class="sm:col-span-2">
          <label class="text-sm text-[var(--text-secondary)]">Message</label>
          <textarea name="message" rows="4" class="w-full px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]" required></textarea>
        </div>
        <div class="sm:col-span-2 flex flex-wrap gap-3 items-center">
          <button type="submit" class="btn bg-[var(--primary)] text-[var(--bg-primary)]">Send</button>
          <p class="text-xs text-[var(--text-secondary)]">Or reach me on <a href="https://t.me/agushambali33" target="_blank" class="underline hover:text-[var(--primary)]">Telegram</a></p>
        </div>
      </form>
    </section>

    <!-- Footer -->
    <footer class="text-center text-sm text-[var(--text-secondary)] pb-20 sm:pb-8">
      <p>© 2025 Agus Hambali — Built with Passion & Tailwind</p>
      <p class="mt-2">Donation (ETH/BSC): <span class="font-mono text-[var(--primary)] break-all">0x18Def71C218664fafb1BBA9d0e8b123425CF0Dae</span></p>
    </footer>
  </div>

  <div class="bottom-nav fixed bottom-4 left-0 right-0 max-w-[720px] mx-auto px-4 sm:hidden z-50">
    <div class="glass p-2 rounded-full flex justify-between items-center shadow-lg">
      <a href="#airdrops" class="flex-1 text-center">
        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
        <span>Airdrops</span>
      </a>
      <a href="#prices" class="flex-1 text-center">
        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"></path></svg>
        <span>Prices</span>
      </a>
      <a href="#chart" class="flex-1 text-center">
        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
        <span>Chart</span>
      </a>
      <a href="#news" class="flex-1 text-center">
        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path></svg>
        <span>News</span>
      </a>
      <a href="#contact" class="flex-1 text-center">
        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
        <span>Contact</span>
      </a>
    </div>
  </div>

  <div id="airdropModal" class="modal hidden fixed inset-0 modal-overlay flex items-center justify-center z-50">
    <div class="glass p-6 rounded-xl w-full max-w-md">
      <h3 class="category-title mb-4">Add/Edit Airdrop</h3>
      <form id="airdropForm">
        <input name="name" placeholder="Project Name" class="w-full mb-3 px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)]" required>
        <select name="type" class="w-full mb-3 px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)]">
          <option value="Testnet">Testnet</option>
          <option value="Quest">Quest</option>
          <option value="Other">Other</option>
        </select>
        <input name="url" placeholder="URL" type="url" class="w-full mb-3 px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)]" required>
        <input name="social" placeholder="Social Link" type="url" class="w-full mb-3 px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)]">
        <select name="status" class="w-full mb-3 px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)]">
          <option value="Open">Open</option>
          <option value="Pending">Pending</option>
          <option value="Closed">Closed</option>
        </select>
        <input name="deadline" placeholder="Deadline (YYYY-MM-DD)" type="date" class="w-full mb-3 px-3 py-2 rounded-lg bg-[var(--glass-bg)] border border-[var(--glass-border)]">
        <div class="flex gap-3">
          <button type="submit" class="btn bg-[var(--primary)] text-[var(--bg-primary)]">Save</button>
          <button type="button" id="closeModal" class="btn bg-[var(--glass-bg)] text-[var(--text-primary)]">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <div id="airdropDetailModal" class="modal hidden fixed inset-0 modal-overlay flex items-center justify-center z-50">
    <div class="glass p-6 rounded-xl w-full max-w-md">
      <h3 class="category-title mb-4">Airdrop Details</h3>
      <div id="airdropDetailContent" class="text-sm text-[var(--text-secondary)]"></div>
      <button id="closeDetailModal" class="btn bg-[var(--glass-bg)] text-[var(--text-primary)] mt-4 w-full">Close</button>
    </div>
  </div>
</body>
</html>